
[[sec-metadata]]
== Metadata

=== Introduction
The Metadata elements used in the Bathymetric Surface product are derived from S-100 and from <<iso-19115-1>> and <<iso-19115-2>>. Optionally additional metadata may be derived from <<iso-ts-19130>> and <<iso-ts-19130-2>> especially metadata relating to the sonar equipment which may have been used to acquire the bathymetric data.

test image
[[fig-data-set-structure-s411]]
.Data Set Structure of S-411
image::../images/figure-ice-data-product-structure.png[UML diagram depicting the Application Schema Data Set Structure as described between this figure and the Coverage Structure figure]

Metadata used for the discovery, identification, and use of S-411 datasets in S-100-based navigations systems (specifically, an S-100-capable ECDIS) is encoded in the exchange catalogue. This metadata conforms to S-100 Part 17, with product-specific restrictions added.

[[subsec-exchange-set-metadata]]
=== Exchange Set metadata
For information exchange, there are several categories of metadata required: metadata about the overall Exchange Catalogue, metadata about each of the datasets contained in the Catalogue.

<<fig-components-and-associated-metadata-for-the-s411-exchange-set>> depicts the relationships of exchange set elements (datasets and feature/portrayal catalogues) and exchange set metadata. This figure is derived from <<iho-s100,part=17,figure=2>> with relationships not applicable to S-411 omitted.

<<fig-relationship-between-exchange-catalogue-discovery-metadata-and-dataset>> depicts the structure of the exchange catalogue and its component discovery metadata blocks. The structure is the same as in <<iho-s100,part=17>>.

More detailed information about the various classes is shown in <<fig-s411-exchange-set-class-details>> with further description in <<tab-s100-datasetDiscoveryMetadata-params;to!sec-pt-locale>>. In the cases in which classes are used without modification, refer to <<iho-s100,part=17>> for their descriptions.

The discovery metadata classes have numerous attributes which enable important information about the datasets to be examined without the need to process the data (e.g., decryption, decompression, loading). Other Catalogues can be included in the Exchange Set in support of the datasets such as Feature and Portrayal.

[[fig-components-and-associated-metadata-for-the-s411-exchange-set]]
.Components and associated metadata for the S-411 exchange set (<<iho-s100,part=17,figure=2>> with items not used by S-411 omitted)

[[fig-relationship-between-exchange-catalogue-discovery-metadata-and-dataset]]
.Relationship between exchange catalogue, discovery metadata, and dataset (<<iho-s100,part=17,figure=6>> with items not used by S-411 omitted)

[%landscape]
<<<
[[fig-s411-exchange-set-class-details]]
.S-411 Exchange Set Class Details (<<iho-s100,part=17,figure=7>> with items not used by S-411 omitted)

[%portrait]
<<<

The following clauses define the mandatory and optional metadata needed for S-411. In some cases, the metadata may be repeated in a national language. If this is the case it is noted in the Remarks column.

The XML schemas for S-411 exchange catalogues will be available from the IHO Geospatial Information (GI) Registry and/or the S-100 GitHub site (https://github.com/IHO-S100WG).

The S-411 exchange catalogue uses the S-100 exchange catalogue schemas which are available from the S-100 schema server at https://schemas.s100dev.net (downloadable archives are also available on the site for offline use). Implementation of the S-411-specific constraints described in following clauses below is left to developer decision as it can be done in various ways depending on implementation frameworks and the requirements of production or application software.

=== Language

The exchange language must be English.

Character strings must be encoded using the character set defined in <<iso-10646-1>>, in Unicode Transformation Format-8 (UTF-8). A BOM (byte order mark) must not be used.

[%landscape]
<<<

[[subsec-s100_exchangecatalogue]]
=== S100_ExchangeCatalogue

Each Exchange Set has a single S100_ExchangeCatalogue which contains meta information for the data in the Exchange Set.

S-411 uses S100_ExchangeCatalogue without modification. 


==== S100_ExchangeCatalogueIdentifier
S-411 uses S100_ExchangeCatalogueIdentifier without modification.

==== S100_CataloguePointOfContact
S-411 uses S100_CataloguePointOfContact without modification.

=== S100_DatasetDiscoveryMetadata
Dataset discovery metadata in S-411 restricts certain attributes and roles as described in <<tab-s100-datasetDiscoveryMetadata-params>>. Optional S-100 attributes which are mandatory in S-411 are indicated in the Remarks column.

[[tab-s100-datasetDiscoveryMetadata-params]]
.S100_DatasetDiscoveryMetadata parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_DatasetDiscoveryMetadata
|Metadata about the individual datasets in the Exchange Catalogue
|-
|-
|*The optional S-100 attributes _updateNumber_, _updateApplicationDate_, _referenceID_, and _temporalExtent_ are not used in S-411.* +
*References to support file discovery metadata are not permitted because S-411 does not use support files.*

|Attribute
|fileName
|Dataset file name
|1
|URI
|See <<iho-s100,part=1,clause=4.6>> +
*Format: file:/S-411/DATASET_FILES/<dsname>* +
*Dataset file name <dsname> must be according to format defined in <<subsec-dataset-file-naming>>.*

|Attribute
|datasetID
|Dataset ID expressed as a Maritime Resource Name
|0..1
|URN
|The URN must be an MRN. +
*See <<iho-s100,part=3,clause=10>>*

|Attribute
|editionNumber
|The edition number of the dataset
|*1*
//Superfluous for product without updates and reissues; S-411 will always replace the full product file; change to 0 as possible accourding to S100 (RohdeBSH 07. June 2024)
|Integer
|When a data set is initially created, the Edition number 1 is assigned to it. The Edition number is increased by 1 at each new Edition. Edition number remains the same for a re-issue. +
*Mandatory in S-411*

|Attribute
|issueDate
|Date on which the data was made available by the Data Producer
|1
|Date
|-

|Attribute
|issueTime
|Time of day at which the data was made available by the Data Producer
|0..1
|Time
|The S-100 datatype Time +
*May be required if multiple instances of a product are issued on the same day.*

|Attribute
|boundingBox
|The extent of the dataset limits
|*1*
|EX_GeographicBoundingBox
|*Mandatory in S-411* +
*Defined as a rectangle coincident with the outermost cell boundaries of the dataset.*

|Attribute
|productSpecification
|The Product Specification used to create this dataset
|1
|S100_ProductSpecification
|*<<tab-s100-productSpecification-params>>*

|Attribute
|producingAgency
|Agency responsible for producing the data
|1
|CI_Responsibility>CI_Organisation
|See <<iho-s100,part=17,table=17-3>>

|Attribute
|producerCode
|The official IHO Producer Code from S-62
|1
|CharacterString
|*Mandatory in S-411*

|Attribute
|encodingFormat
|The encoding format of the dataset
|1
|S100_EncodingFormat
|*The only allowed value is GML* +
*<<tab-s100-encodingFormat-params>>*

|Attribute
|dataCoverage
|Provides information about data coverages within the dataset
|*1*..*
|S100_DataCoverage
|*Mandatory in S-411* +
*<<tab-s100-dataCoverage-params>>*

|Attribute
|comment
|Any additional information
|0..1
|CharacterString
|-

|Attribute
|defaultLocale
|Default language and character set used in the dataset
|0..1
|PT_Locale
|In absence of defaultLocale, the language is English, and the character set is UTF-8.

|Attribute
|otherLocale
|Other languages and character sets used in the dataset
|0..*
|PT_Locale
|

|Attribute
|metadataPointOfContact
|Point of contact for metadata
|0..1
|CI_Responsibility>CI_Individual +
or +
CI_Responsibility>CI_Organisation
|Only if metadataPointOfContact differs from producingAgency

|Attribute
|metadataDateStamp
|Date stamp for metadata
|0..1
|Date
|May or may not be the issue date


|Attribute
|replacedData
|Indicates if a cancelled dataset is replaced by another data file(s)
|0..1
|Boolean
|See note following <<iho-s100,part=17,table=S100_DatasetDiscoveryMetadata>> +
*Mandatory when purpose = cancellation*

|Attribute
|dataReplacement
|Dataset name
|0..*
|CharacterString
|A dataset may be replaced by 1 or more datasets. +
*Dataset name must be according to format defined in <<subsec-dataset-file-naming>>.* +
*For example, _411DE00KD54.GML_* +
See note following <<iho-s100,part=17,table=S100_DatasetDiscoveryMetadata>> +
*Mandatory when replacedData = true*

|Attribute
|navigationPurpose
|Classification of intended navigation purpose (for Catalogue indexing purposes)
|*1*..3
|S100_NavigationPurpose
|If Product Specification is intended for creation of navigational products, this attribute should be mandatory. +
*Mandatory in S-411*


|===

==== S100_NavigationPurpose
S-411 uses S100_NavigationPurpose without modification.

==== S100_DataCoverage
S-411 uses S100_DataCoverage without modification, but with additional remarks and changes to the multiplicity.

[[tab-s100-dataCoverage-params]]
.S100_DataCoverage parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_DataCoverage
|A spatial extent where data is provided along with the display scale information for the provided data
|-
|-
|This field is used by user systems as part of the data loading and unloading algorithms, and it is strongly encouraged that Product Specifications mandate the use of one or more of the displayScale provided as part of S100_DataCoverage.

|Attribute
|boundingPolygon
|A polygon which defines the actual data limit
|1
|EX_BoundingPolygon
|<<note-s100datacoverage-boundingPolygon>>

|Attribute
|temporalExtent
|Specification of the temporal extent of the coverage
|*0*
|S100_TemporalExtent
|*The _temporalExtent_ is not used in S-411.*

|Attribute
|optimumDisplayScale
|The scale at which the data is optimally displayed
|0..1
|Integer
|Example: A scale of 1:25000 is encoded as 25000

|Attribute
|maximumDisplayScale
|The maximum scale at which the data is displayed
|0..1
|Integer
|

|Attribute
|minimumDisplayScale
|The minimum scale at which the data is displayed
|0..1
|Integer
|

|===
[[note-s100datacoverage-boundingPolygon]]
[NOTE]
====
_boundingPolygon_ is restricted to a single GML Polygon with one exterior and 0 or more interiors expressed as Linear Rings using SRS EPSG:4326. The exterior and optional interiors shall be composed of a closed sequence of >=4 coordinate positions expressed individually or as a list (posList). The GML polygon shall have a valid GML identifier.
====

==== S100_Purpose
S-411 uses S100_Purpose without modification, but with a restriction on the allowed values.

[[tab-s100-purpose]]
.S100_Purpose
[cols="a,a,a,^a,a,options="header"]
|===
|Role name |Name |Description |Code |Remarks

|Enumeration
|S100_Purpose
|The purpose of the dataset
|-
|*The S-100 values _update_, _reissue_, and _delta_ are not used in S-411.*

|Value
|newDataset
|Brand new dataset
|1
|No data has previously been produced for this area.

|Value
|newEdition
|New edition of the dataset or Catalogue
|2
|Includes new information which has not been previously distributed by updates.

|Value
|cancellation
|Dataset or Catalogue that has been cancelled
|5
|Indicates the dataset or Catalogue should no longer be used and can be deleted.
|===

==== S100_EncodingFormat
S-411 uses S100_EncodingFormat with a restriction on the allowed values to permit only the S-100 GML format for S-411 datasets.

[[tab-s100-encodingFormat-params]]
.S100_EncodingFormat parameters
[cols="a,a,a,^a,a",options="header"]
|===
|Role name |Name |Description |Code |Remarks

|Enumeration
|S100_EncodingFormat
|The encoding format
|-
|*The only value allowed in S-411 is "`GML`".*

|Value
|HDF5
|The HDF5 data format as defined in <<iho-s100,part=10c>>
|3
|-
|===

==== S100_ProductSpecification
S-411 uses S100_ProductSpecification without modification, but with additional remarks and changes to the multiplicity.

[[tab-s100-productSpecification-params]]
.S100_ProductSpecification parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_ProductSpecification
|The Product Specification contains the information needed to build the specified product.
|-
|-
|-

|Attribute
|name
|The name of the Product Specification used to create the datasets
|*1*
|CharacterString
|The name in the GI Registry should be used for this field. +
*For S-411, this name is "Bathymetric Surface" (as of 25 June 2024).*

|Attribute
|version
|The version number of the Product Specification
|*1*
|CharacterString
|TR 2/2007 specifies versioning of Product Specifications +
*Example: 3.0.0 for S-411 Edition 3.0.0*

|Attribute
|date
|The version date of the Product Specification
|*1*
|Date
|-

|Attribute
|productIdentifier
|Machine readable unique identifier of a product type
|1
|CharacterString +
(Restricted to Product ID values from the IHO Product Specification Register in the IHO Geospatial Information (GI) Registry)
|*For S-411, this identifier is "S-411" (without quotes).*

|Attribute
|number
|The number used to lookup the product in the Product Specification Register of the IHO GI registry
|1
|Integer
|For IHO Product Specifications, these numbers should be taken from the IHO Product Specification Register in the IHO GI Registry. +
*The corresponding Idx-number of the IHO Registry for S-411 is numbered 199.*

|Attribute
|compliancyCategory
|The level of compliance of the Product Specification to S-100
|0..1
|S100_CompliancyCategory
|See <<iho-s100,part=4a,clause=4a-5.5>> *and <<subsec-s100-compliancy-category>> below.*
|===

[[subsec-s100-compliancy-category]]
==== S100_CompliancyCategory
S-411 exchange sets conforming to this edition of S-411 and using a CRS from the EPSG registry may be encoded as category 3 or 4 when the _compliancyCategory_ metadata attribute is populated. Because S-98 interoperability assumes _category4_ datasets, _category4_ may be used for test purposes, though the absence of test datasets and of a published IHO interoperability catalogue mean this edition of S-411 does not yet qualify for _category4_. *Given the uncertainty about interoperability testing requirements and availability of test datasets, the S-100 WG chair and S-411 PT chair should be consulted for up-to-date guidance.*

[[tab-s100-compliancyCategory]]
.S100_CompliancyCategory
[cols="a,a,a,^a,a",options="header"]
|===
|Role Name |Name |Description |Code |Remarks


|Enumeration
|S100_CompliancyCategory
|-
|-
|*S-411 should use _category3_ or _category4_, subject to the guidance provided in <<subsec-s100-compliancy-category>>.*

|Value
|category3
|IHO S-100 compliant with standard encoding
|3
|*Qualifies as _category2_; plus "The Product Specification uses only an encoding method defined in <<iho-s100,part=10;and!part=4a,clause=5.5.3>>"*

|Value
|category4
|IHO S-100 and IMO harmonized display compliant
|4
|*Qualifies as _category3_; plus additional requirements, including a portrayal catalogue, cybersecurity (digital signatures and encryption), test material, use of a CRS from the EPSG Registry, and compliance with the IHO S-98 interoperability catalogue. <<iho-s100,part=4a,clause=5.5.4>>*

|===

==== S100_ProtectionScheme
S-411 uses S100_ProtectionScheme without modification.


=== MD_MaintenanceInformation
S-411 uses MD_MaintenanceInformation without modification.


=== MD_MaintenanceFrequencyCode
S-411 uses MD_MaintenanceFrequencyCode without modification.


=== S100_CatalogueDiscoveryMetadata
S-411 uses S100_CatalogueDiscoveryMetadata without modification.


==== S100_CatalogueScope
S-411 uses S100_CatalogueScope without modification.


[[sec-pt-locale]]
==== PT_Locale
S-411 uses PT_Locale without modification.
The class PT_Locale is defined in <<iso-19115-1>>. LanguageCode, CountryCode, and MD_CharacterSetCode are ISO codelists which are defined in a codelists file which is part of the S-100 Edition 5.2.0 schema distribution.

[[sec-certs-digsign]]
=== Certificates and Digital Signatures
The classes S100_SE_CertificateContainerType (<<iho-s100,part=15,clause=8.11.1>>), S100_SE_DigitalSignatureReference (<<iho-s100,part=15,clause=8.11.7>>), and S100_SE_DigitalSignature are defined in <<iho-s100,part=15>> and implemented in the S-100 generic schemas.

In accordance with <<iho-s100,part=15>>, only the ECDSA algorithm is allowed from the S100_SE_DigitalSignatureReference enumeration.

S-411 uses S100_SE_DigitalSignature without modification. As stated in <<iho-s100,part=15,clause=15-8.11.3>>:

"The class S100_SE_DigitalSignature is realized as one of either S100_SE_SignatureOnData (a digital signature of a particular identified resource) or an additional digital signature defined using the class S100_SE_AdditionalSignature, each of which is either a S100_SE_SignatureOnData or S100_SE_SignatureOnSignature element as described in <<iho-s100,part=15,clause=8.8>>. <<iho-s100,part=17>> metadata thus allows for multiple digital signatures, a single mandatory S100_SE_SignatureOnData and any number of additional signatures, either of the data or other signatures."
